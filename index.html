<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NEXUS.AI | Quantum Data Analyst</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&family=Exo+2:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 20%, #00d4ff 50%, #9d4edd 80%);
      --secondary-gradient: linear-gradient(135deg, #0a0a1a 0%, #0f172a 30%, #1e1b4b 70%, #111827 100%);
      --accent-color: #00f7ff;
      --accent-glow: 0 0 20px #00f7ff, 0 0 40px rgba(0, 247, 255, 0.3);
      --card-bg: rgba(15, 23, 42, 0.7);
      --glass-bg: rgba(255, 255, 255, 0.08);
      --text-primary: #e2e8f0;
      --text-secondary: #94a3b8;
      --success-color: #00ff9d;
      --error-color: #ff4d7d;
      --warning-color: #ffb800;
      --border-radius: 20px;
      --spacing-unit: 28px;
      --transition-speed: 0.4s;
      --neon-border: 1px solid rgba(102, 126, 234, 0.3);
      --depth-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Exo 2', 'Segoe UI', system-ui, sans-serif;
      background: var(--secondary-gradient);
      color: var(--text-primary);
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
      line-height: 1.6;
    }

    /* Animated background particles */
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -2;
    }

    /* Grid overlay */
    .grid-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: 
        linear-gradient(rgba(102, 126, 234, 0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(102, 126, 234, 0.05) 1px, transparent 1px);
      background-size: 50px 50px;
      z-index: -1;
      opacity: 0.3;
    }

    @keyframes scan {
      0% { top: 0; }
      100% { top: 100%; }
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 30px;
      position: relative;
    }

    /* Header with advanced effects */
    .header {
      text-align: center;
      margin-bottom: 80px;
      position: relative;
      padding: 40px 0;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, rgba(102, 126, 234, 0.1) 0%, transparent 70%);
      z-index: -1;
    }

    .logo {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin-bottom: 30px;
      position: relative;
    }

    .logo-icon-wrapper {
      position: relative;
      width: 120px;
      height: 120px;
    }

    .logo-icon {
      font-size: 60px;
      background: var(--primary-gradient);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      position: relative;
      z-index: 2;
      filter: drop-shadow(0 0 20px rgba(102, 126, 234, 0.5));
      animation: pulse 4s ease-in-out infinite;
    }

    .logo-icon-wrapper::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 140px;
      height: 140px;
      border: 2px solid rgba(102, 126, 234, 0.3);
      border-radius: 50%;
      animation: rotate 20s linear infinite;
    }

    .logo-icon-wrapper::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 160px;
      height: 160px;
      border: 1px solid rgba(0, 247, 255, 0.2);
      border-radius: 50%;
      animation: rotate 30s linear infinite reverse;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes rotate {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    .logo-text {
      font-family: 'Orbitron', monospace;
      font-size: 4.5rem;
      font-weight: 900;
      background: linear-gradient(135deg, #667eea 0%, #00d4ff 50%, #9d4edd 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: 2px;
      text-transform: uppercase;
      position: relative;
      text-shadow: 0 0 30px rgba(102, 126, 234, 0.5);
      animation: textGlow 3s ease-in-out infinite alternate;
    }

    @keyframes textGlow {
      0% { text-shadow: 0 0 20px rgba(102, 126, 234, 0.5), 0 0 40px rgba(0, 247, 255, 0.3); }
      100% { text-shadow: 0 0 30px rgba(102, 126, 234, 0.8), 0 0 60px rgba(0, 247, 255, 0.5); }
    }

    .tagline {
      font-size: 1.3rem;
      color: var(--text-secondary);
      max-width: 800px;
      margin: 0 auto;
      line-height: 1.8;
      position: relative;
      display: inline-block;
      font-weight: 300;
      letter-spacing: 1px;
    }

    .tagline::after {
      content: '';
      position: absolute;
      bottom: -15px;
      left: 50%;
      transform: translateX(-50%);
      width: 150px;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
    }

    /* Main Card with advanced glass morphism */
    .main-card {
      background: var(--card-bg);
      backdrop-filter: blur(30px) saturate(180%);
      border-radius: var(--border-radius);
      border: var(--neon-border);
      box-shadow: 
        var(--depth-shadow),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        0 0 0 1px rgba(255, 255, 255, 0.05);
      overflow: hidden;
      margin-bottom: 60px;
      position: relative;
      transition: all var(--transition-speed) ease;
      z-index: 1;
    }

    .main-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
      z-index: 2;
    }

    .main-card:hover {
      transform: translateY(-8px);
      box-shadow: 
        0 35px 60px -15px rgba(0, 0, 0, 0.6),
        var(--accent-glow);
    }

    .card-header {
      padding: 35px 40px;
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.1), rgba(0, 247, 255, 0.05));
      border-bottom: var(--neon-border);
      position: relative;
    }

    .card-header h2 {
      display: flex;
      align-items: center;
      gap: 15px;
      font-size: 2rem;
      font-weight: 600;
      font-family: 'Orbitron', monospace;
      letter-spacing: 1px;
    }

    .card-header i {
      color: var(--accent-color);
      filter: drop-shadow(0 0 10px var(--accent-color));
    }

    .card-body {
      padding: 40px;
    }

    /* Upload Zones - Futuristic design */
    .upload-section {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 40px;
      margin-bottom: 40px;
    }

    .upload-zone {
      position: relative;
    }

    .upload-label {
      display: block;
      margin-bottom: 18px;
      font-weight: 600;
      font-size: 1.2rem;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 12px;
      font-family: 'Orbitron', monospace;
      letter-spacing: 1px;
    }

    .required {
      color: var(--error-color);
      font-size: 1.8rem;
      line-height: 1;
      filter: drop-shadow(0 0 5px var(--error-color));
      animation: blink 2s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .upload-box {
      position: relative;
      height: 220px;
      border: 2px dashed rgba(255, 255, 255, 0.1);
      border-radius: var(--border-radius);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 25px;
      cursor: pointer;
      transition: all var(--transition-speed) ease;
      background: var(--glass-bg);
      overflow: hidden;
      backdrop-filter: blur(10px);
    }

    .upload-box::before {
      content: '';
      position: absolute;
      top: -2px;
      left: -2px;
      right: -2px;
      bottom: -2px;
      background: linear-gradient(45deg, #667eea, #00d4ff, #9d4edd, #667eea);
      border-radius: var(--border-radius);
      z-index: -1;
      opacity: 0;
      transition: opacity var(--transition-speed) ease;
      background-size: 400% 400%;
      animation: gradientShift 3s ease infinite;
    }

    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .upload-box:hover::before {
      opacity: 0.3;
    }

    .upload-box:hover {
      border-color: var(--accent-color);
      background: rgba(0, 247, 255, 0.03);
      transform: scale(1.03);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), var(--accent-glow);
    }

    .upload-box.active {
      border-color: var(--success-color);
      background: rgba(0, 255, 157, 0.05);
    }

    .upload-box.active::before {
      background: linear-gradient(45deg, var(--success-color), #00d4ff, var(--success-color));
    }

    .upload-icon {
      font-size: 56px;
      color: var(--accent-color);
      transition: all var(--transition-speed) ease;
      filter: drop-shadow(0 0 10px var(--accent-color));
    }

    .upload-box:hover .upload-icon {
      transform: scale(1.3) rotate(10deg);
    }

    .upload-text {
      text-align: center;
      padding: 0 25px;
    }

    .upload-text h3 {
      font-size: 1.5rem;
      margin-bottom: 10px;
      font-weight: 600;
      font-family: 'Orbitron', monospace;
      letter-spacing: 1px;
    }

    .upload-text p {
      color: var(--text-secondary);
      font-size: 1rem;
      line-height: 1.5;
    }

    .upload-input {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
      z-index: 2;
    }

    .file-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(15, 23, 42, 0.9));
      padding: 20px;
      border-radius: 0 0 var(--border-radius) var(--border-radius);
      display: none;
      backdrop-filter: blur(20px);
      z-index: 1;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .file-info.active {
      display: block;
      animation: slideUp 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes slideUp {
      from { transform: translateY(100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .file-details {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .file-name {
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 12px;
      font-family: 'Orbitron', monospace;
      font-size: 1.1rem;
    }

    .file-size {
      color: var(--text-secondary);
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.05);
      padding: 4px 12px;
      border-radius: 12px;
    }

    .remove-file {
      background: rgba(255, 77, 125, 0.2);
      border: 1px solid var(--error-color);
      color: var(--error-color);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-speed) ease;
      backdrop-filter: blur(10px);
    }

    .remove-file:hover {
      background: rgba(255, 77, 125, 0.4);
      transform: rotate(180deg);
      box-shadow: 0 0 15px var(--error-color);
    }

    /* Action Buttons with Holographic effect */
    .action-buttons {
      display: flex;
      gap: 25px;
      margin-top: 50px;
      position: relative;
    }

    .btn {
      flex: 1;
      padding: 22px 30px;
      border: none;
      border-radius: var(--border-radius);
      font-size: 1.2rem;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      transition: all var(--transition-speed) ease;
      position: relative;
      overflow: hidden;
      font-family: 'Orbitron', monospace;
      letter-spacing: 1px;
      text-transform: uppercase;
      backdrop-filter: blur(10px);
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.7s ease;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn::after {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--border-radius);
      padding: 2px;
      background: linear-gradient(45deg, #667eea, #00d4ff, #9d4edd);
      -webkit-mask: 
        linear-gradient(#fff 0 0) content-box, 
        linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: 0;
      transition: opacity var(--transition-speed) ease;
    }

    .btn:hover::after {
      opacity: 1;
    }

    .btn-primary {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(0, 247, 255, 0.1));
      color: var(--accent-color);
      border: 1px solid rgba(102, 126, 234, 0.3);
      box-shadow: 0 15px 30px rgba(102, 126, 234, 0.2);
    }

    .btn-primary:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 25px 50px rgba(102, 126, 234, 0.4), var(--accent-glow);
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.3), rgba(0, 247, 255, 0.2));
    }

    .btn-secondary {
      background: rgba(255, 255, 255, 0.05);
      color: var(--text-primary);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .btn-secondary:hover {
      background: rgba(255, 255, 255, 0.1);
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    .btn-tertiary {
      background: linear-gradient(135deg, rgba(157, 78, 221, 0.2), rgba(255, 77, 125, 0.1));
      color: #ff4d7d;
      border: 1px solid rgba(157, 78, 221, 0.3);
    }

    .btn-tertiary:hover {
      background: linear-gradient(135deg, rgba(157, 78, 221, 0.3), rgba(255, 77, 125, 0.2));
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(157, 78, 221, 0.3);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      transform: none !important;
      box-shadow: none !important;
    }

    .btn:disabled::before,
    .btn:disabled::after {
      display: none;
    }

    /* Loading State - Quantum Computing Inspired */
    .loading-state {
      display: none;
      text-align: center;
      padding: 80px 40px;
      position: relative;
    }

    .loading-state.active {
      display: block;
      animation: quantumFadeIn 0.6s ease;
    }

    @keyframes quantumFadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .loading-animation {
      position: relative;
      width: 200px;
      height: 200px;
      margin: 0 auto 40px;
    }

    .quantum-ring {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 150px;
      height: 150px;
      border: 2px solid rgba(102, 126, 234, 0.3);
      border-radius: 50%;
      animation: spin 20s linear infinite;
    }

    .quantum-ring:nth-child(2) {
      width: 120px;
      height: 120px;
      border-color: rgba(0, 247, 255, 0.3);
      animation: spin 15s linear infinite reverse;
    }

    .quantum-ring:nth-child(3) {
      width: 90px;
      height: 90px;
      border-color: rgba(157, 78, 221, 0.3);
      animation: spin 10s linear infinite;
    }

    .quantum-particle {
      position: absolute;
      width: 12px;
      height: 12px;
      background: var(--accent-color);
      border-radius: 50%;
      filter: drop-shadow(0 0 10px var(--accent-color));
      animation: particleOrbit 3s linear infinite;
    }

    .quantum-particle:nth-child(4) { animation-delay: 0s; top: 0; left: 50%; }
    .quantum-particle:nth-child(5) { animation-delay: 0.5s; top: 25%; left: 85%; }
    .quantum-particle:nth-child(6) { animation-delay: 1s; top: 75%; left: 85%; }
    .quantum-particle:nth-child(7) { animation-delay: 1.5s; top: 100%; left: 50%; }
    .quantum-particle:nth-child(8) { animation-delay: 2s; top: 75%; left: 15%; }
    .quantum-particle:nth-child(9) { animation-delay: 2.5s; top: 25%; left: 15%; }

    @keyframes particleOrbit {
      0% { transform: rotate(0deg) translateX(75px) rotate(0deg); }
      100% { transform: rotate(360deg) translateX(75px) rotate(-360deg); }
    }

    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }

    .loading-text {
      font-size: 1.4rem;
      color: var(--text-secondary);
      max-width: 500px;
      margin: 0 auto;
      line-height: 1.8;
      font-family: 'Orbitron', monospace;
    }

    .loading-text h3 {
      font-size: 1.8rem;
      color: var(--accent-color);
      margin-bottom: 15px;
      font-weight: 500;
      letter-spacing: 2px;
    }

    .loading-text .dots::after {
      content: '';
      animation: dots 1.5s steps(4, end) infinite;
    }

    @keyframes dots {
      0%, 20% { content: ''; }
      40% { content: '.'; }
      60% { content: '..'; }
      80%, 100% { content: '...'; }
    }

    .progress-bar {
      width: 300px;
      height: 4px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 2px;
      margin: 30px auto;
      overflow: hidden;
      position: relative;
    }

    .progress-fill {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #667eea, #00d4ff);
      border-radius: 2px;
      animation: progressAnimation 3s ease-in-out infinite;
      box-shadow: 0 0 10px #00d4ff;
    }

    @keyframes progressAnimation {
      0%, 100% { width: 0%; left: 0; }
      50% { width: 100%; left: 0; }
      100% { width: 0%; left: 100%; }
    }

    /* Results Section - Advanced Display */
    .results-section {
      display: none;
      margin-top: 60px;
      animation: quantumFadeIn 0.8s ease;
      position: relative;
    }

    .results-section.active {
      display: block;
    }

    .results-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 40px;
      padding-bottom: 25px;
      border-bottom: var(--neon-border);
      position: relative;
    }

    .results-header::after {
      content: '';
      position: absolute;
      bottom: -1px;
      left: 0;
      width: 100%;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
    }

    .results-title {
      display: flex;
      align-items: center;
      gap: 20px;
      font-size: 2.2rem;
      font-weight: 700;
      font-family: 'Orbitron', monospace;
      letter-spacing: 2px;
    }

    .results-count {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(0, 247, 255, 0.1));
      color: var(--accent-color);
      padding: 10px 20px;
      border-radius: 25px;
      font-size: 1.1rem;
      font-weight: 600;
      border: 1px solid rgba(102, 126, 234, 0.3);
      backdrop-filter: blur(10px);
      animation: pulse 2s infinite;
    }

    .results-actions {
      display: flex;
      gap: 15px;
    }

    .results-container {
      display: grid;
      gap: 30px;
    }

    .result-card {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.8), rgba(30, 27, 75, 0.6));
      border-radius: var(--border-radius);
      border: var(--neon-border);
      overflow: hidden;
      transition: all var(--transition-speed) ease;
      backdrop-filter: blur(20px);
      position: relative;
    }

    .result-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
      opacity: 0;
      transition: opacity var(--transition-speed) ease;
    }

    .result-card:hover {
      transform: translateY(-8px) scale(1.01);
      border-color: var(--accent-color);
      box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4), var(--accent-glow);
    }

    .result-card:hover::before {
      opacity: 1;
    }

    .result-question {
      padding: 30px;
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.1), transparent);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 20px;
      cursor: pointer;
      transition: all var(--transition-speed) ease;
    }

    .result-question:hover {
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.2), transparent);
    }

    .result-question i {
      color: var(--accent-color);
      transition: all var(--transition-speed) ease;
      font-size: 1.5rem;
      filter: drop-shadow(0 0 5px var(--accent-color));
    }

    .result-card.active .result-question i {
      transform: rotate(180deg);
    }

    .question-text {
      flex: 1;
      font-weight: 600;
      font-size: 1.3rem;
      line-height: 1.4;
      font-family: 'Exo 2', sans-serif;
    }

    .question-index {
      background: rgba(102, 126, 234, 0.2);
      color: var(--accent-color);
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Orbitron', monospace;
      font-weight: 700;
      font-size: 1.1rem;
      flex-shrink: 0;
    }

    .result-answer {
      padding: 0;
      max-height: 0;
      overflow: hidden;
      transition: all var(--transition-speed) cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .result-card.active .result-answer {
      padding: 35px;
      max-height: 5000px;
    }

    .answer-content {
      color: var(--text-secondary);
      line-height: 1.8;
      font-size: 1.1rem;
    }

    .answer-content img {
      max-width: 100%;
      height: auto;
      border-radius: 15px;
      margin: 25px 0;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6);
      cursor: pointer;
      transition: all var(--transition-speed) ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .answer-content img:hover {
      transform: scale(1.03);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.8), 0 0 30px rgba(0, 247, 255, 0.3);
    }

    .answer-content pre {
      background: rgba(0, 0, 0, 0.4);
      padding: 25px;
      border-radius: 15px;
      overflow-x: auto;
      margin: 25px 0;
      border: 1px solid rgba(255, 255, 255, 0.1);
      font-family: 'Courier New', monospace;
      font-size: 0.95rem;
      position: relative;
    }

    .answer-content pre::before {
      content: 'code';
      position: absolute;
      top: -10px;
      left: 20px;
      background: var(--secondary-gradient);
      color: var(--accent-color);
      padding: 5px 15px;
      border-radius: 10px;
      font-size: 0.8rem;
      font-family: 'Orbitron', monospace;
      letter-spacing: 1px;
      border: 1px solid rgba(0, 247, 255, 0.3);
    }

    .answer-content code {
      font-family: 'Courier New', monospace;
      color: var(--success-color);
      background: rgba(0, 255, 157, 0.1);
      padding: 2px 8px;
      border-radius: 4px;
    }

    .answer-stats {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .stat-item {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .stat-item i {
      color: var(--accent-color);
    }

    /* Modal - Advanced */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      padding: 30px;
      animation: modalFadeIn 0.4s ease;
      backdrop-filter: blur(20px);
    }

    @keyframes modalFadeIn {
      from { opacity: 0; backdrop-filter: blur(0); }
      to { opacity: 1; backdrop-filter: blur(20px); }
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      max-width: 90%;
      max-height: 85%;
      object-fit: contain;
      border-radius: 20px;
      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.9), 0 0 50px rgba(0, 247, 255, 0.3);
      animation: modalScaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    @keyframes modalScaleIn {
      from { transform: scale(0.8) rotate(-5deg); opacity: 0; }
      to { transform: scale(1) rotate(0); opacity: 1; }
    }

    .modal-close {
      position: absolute;
      top: 40px;
      right: 40px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      font-size: 28px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-speed) ease;
      backdrop-filter: blur(10px);
      z-index: 10001;
    }

    .modal-close:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: rotate(180deg) scale(1.1);
      box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
    }

    /* Error State */
    .error-card {
      background: linear-gradient(135deg, rgba(255, 77, 125, 0.1), rgba(255, 77, 125, 0.05));
      border: 1px solid var(--error-color);
      border-radius: var(--border-radius);
      padding: 40px;
      text-align: center;
      backdrop-filter: blur(20px);
      position: relative;
      overflow: hidden;
    }

    .error-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--error-color), transparent);
    }

    .error-icon {
      font-size: 60px;
      color: var(--error-color);
      margin-bottom: 25px;
      filter: drop-shadow(0 0 20px var(--error-color));
      animation: errorPulse 2s infinite;
    }

    @keyframes errorPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    .error-message {
      font-size: 1.4rem;
      color: white;
      font-family: 'Orbitron', monospace;
      letter-spacing: 1px;
    }

    .error-details {
      margin-top: 20px;
      color: var(--text-secondary);
      font-size: 1rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Footer */
    .footer {
      text-align: center;
      margin-top: 80px;
      padding: 40px 0;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      color: var(--text-secondary);
      font-size: 0.9rem;
      position: relative;
    }

    .footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--accent-color), transparent);
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-bottom: 20px;
    }

    .footer-link {
      color: var(--text-secondary);
      text-decoration: none;
      transition: color var(--transition-speed) ease;
      font-family: 'Orbitron', monospace;
      letter-spacing: 1px;
    }

    .footer-link:hover {
      color: var(--accent-color);
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .container {
        max-width: 100%;
        padding: 30px 20px;
      }
      
      .logo-text {
        font-size: 3.5rem;
      }
      
      .upload-section {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px 15px;
      }
      
      .logo-text {
        font-size: 2.5rem;
      }
      
      .logo-icon-wrapper {
        width: 80px;
        height: 80px;
      }
      
      .logo-icon {
        font-size: 40px;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .results-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 20px;
      }
      
      .results-actions {
        width: 100%;
        justify-content: space-between;
      }
      
      .modal-content {
        max-width: 100%;
        max-height: 70%;
      }
      
      .modal-close {
        top: 20px;
        right: 20px;
        width: 50px;
        height: 50px;
        font-size: 24px;
      }
      
      .card-header, .card-body {
        padding: 25px;
      }
    }

    @media (max-width: 480px) {
      .logo-text {
        font-size: 2rem;
      }
      
      .tagline {
        font-size: 1rem;
      }
      
      .btn {
        padding: 18px 20px;
        font-size: 1rem;
      }
      
      .results-title {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>
  <!-- Animated background particles -->
  <div id="particles-js"></div>
  <div class="grid-overlay"></div>
  <div class="scanline"></div>

  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <div class="logo-icon-wrapper">
          <div class="logo-icon">
            <i class="fas fa-brain-circuit"></i>
          </div>
        </div>
        <div class="logo-text">QUANTUM.AI</div>
      </div>
      <div class="tagline">
        NEXT-GEN QUANTUM DATA ANALYST • NEURAL NETWORK ANALYSIS • REAL-TIME INSIGHTS • MULTI-DIMENSIONAL VISUALIZATION
      </div>
    </div>

    <!-- Main Card -->
    <div class="main-card">
      <div class="card-header">
        <h2><i class="fas fa-atom"></i> QUANTUM DATA INTERFACE</h2>
      </div>
      
      <div class="card-body">
        <!-- Upload Sections -->
        <div class="upload-section">
          <!-- Questions File -->
          <div class="upload-zone">
            <label class="upload-label">
              <i class="fas fa-quantum-computer"></i>
              QUANTUM QUERIES
              <span class="required">*</span>
            </label>
            <div class="upload-box" id="questionsZone">
              <div class="upload-icon">
                <i class="fas fa-file-code"></i>
              </div>
              <div class="upload-text">
                <h3>NEURAL QUERY UPLOAD</h3>
                <p>Upload .txt file containing your analytical questions. The AI will parse and execute quantum-level analysis.</p>
              </div>
              <input type="file" id="questions_file" class="upload-input" accept=".txt">
              <div class="file-info" id="questionsInfo">
                <div class="file-details">
                  <div class="file-name">
                    <i class="fas fa-file-code"></i>
                    <span id="questionsFileName"></span>
                  </div>
                  <div class="file-size" id="questionsFileSize"></div>
                  <button type="button" class="remove-file" id="removeQuestionsFile">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Dataset File -->
          <div class="upload-zone">
            <label class="upload-label">
              <i class="fas fa-database"></i>
              QUANTUM DATASET (OPTIONAL)
            </label>
            <div class="upload-box" id="dataZone">
              <div class="upload-icon">
                <i class="fas fa-server"></i>
              </div>
              <div class="upload-text">
                <h3>DATA STREAM UPLOAD</h3>
                <p>CSV, Excel, JSON, Parquet, TXT files supported. Advanced neural processing enabled.</p>
              </div>
              <input type="file" id="data_file" class="upload-input" accept=".csv,.xlsx,.xls,.json,.parquet,.txt">
              <div class="file-info" id="dataInfo">
                <div class="file-details">
                  <div class="file-name">
                    <i class="fas fa-server"></i>
                    <span id="dataFileName"></span>
                  </div>
                  <div class="file-size" id="dataFileSize"></div>
                  <button type="button" class="remove-file" id="removeDataFile">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Internet Scrapper Section -->
        <div id="internetScrapperSection" style="display: none; margin-top: 40px; padding: 25px; background: rgba(255,255,255,0.03); border-radius: var(--border-radius); border: 1px solid rgba(255,255,255,0.05);">
          <h3 style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; color: var(--accent-color); font-family: 'Orbitron';">
            <i class="fas fa-globe"></i> INTERNET SCRAPPER
          </h3>
          <div style="margin-bottom: 20px;">
            <label style="display: block; margin-bottom: 10px; color: var(--text-secondary); font-family: 'Orbitron';">
              <i class="fas fa-question-circle"></i> ENTER YOUR QUESTIONS (ONE PER LINE)
            </label>
            <textarea id="scrapperQuestions" rows="6" style="width: 100%; padding: 15px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: var(--border-radius); color: var(--text-primary); font-family: 'Exo 2'; font-size: 1rem; resize: vertical;" placeholder="Type your questions here, one per line...
Example:
What is the current stock price of Apple?
What are the latest AI trends?
Who won the last football world cup?"></textarea>
          </div>
          <div style="display: flex; gap: 15px;">
            <button id="scrapperSubmitBtn" class="btn" style="background: linear-gradient(135deg, rgba(0, 247, 255, 0.2), rgba(0, 255, 157, 0.1)); color: var(--success-color); border: 1px solid rgba(0, 255, 157, 0.3);">
              <i class="fas fa-paper-plane"></i>
              <span>SUBMIT QUERIES</span>
            </button>
            <button id="scrapperCancelBtn" class="btn" style="background: rgba(255,255,255,0.05); color: var(--text-primary); border: 1px solid rgba(255,255,255,0.1);">
              <i class="fas fa-times"></i>
              <span>CANCEL</span>
            </button>
          </div>
        </div>

        <!-- Advanced Options -->
        <div class="advanced-options" style="margin-top: 30px; padding: 25px; background: rgba(255,255,255,0.03); border-radius: var(--border-radius); border: 1px solid rgba(255,255,255,0.05);">
          <h3 style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px; color: var(--accent-color); font-family: 'Orbitron';">
            <i class="fas fa-cogs"></i> QUANTUM PROCESSING OPTIONS
          </h3>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
            <div class="option-item">
              <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; color: var(--text-secondary);">
                <input type="checkbox" id="enableAI" checked style="accent-color: var(--accent-color);">
                <span>Enable Neural AI Analysis</span>
              </label>
            </div>
            <div class="option-item">
              <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; color: var(--text-secondary);">
                <input type="checkbox" id="enableViz" checked style="accent-color: var(--accent-color);">
                <span>3D Visualization</span>
              </label>
            </div>
            <div class="option-item">
              <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; color: var(--text-secondary);">
                <input type="checkbox" id="enablePattern" style="accent-color: var(--accent-color);">
                <span>Pattern Recognition</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="btn btn-primary" id="submitBtn">
            <i class="fas fa-rocket-launch"></i>
            <span>INITIATE QUANTUM ANALYSIS</span>
          </button>
          <button class="btn btn-secondary" id="clearBtn">
            <i class="fas fa-eraser"></i>
            <span>QUANTUM RESET</span>
          </button>
          <button class="btn btn-tertiary" id="demoBtn">
            <i class="fas fa-vial"></i>
            <span>LOAD DEMO</span>
          </button>
          <button class="btn" id="scrapperBtn" style="background: linear-gradient(135deg, rgba(255, 184, 0, 0.2), rgba(255, 77, 125, 0.1)); color: var(--warning-color); border: 1px solid rgba(255, 184, 0, 0.3);">
            <i class="fas fa-globe"></i>
            <span>INTERNET SCRAPPER</span>
          </button>
        </div>

        <!-- Loading State -->
        <div class="loading-state" id="loading">
          <div class="loading-animation">
            <div class="quantum-ring"></div>
            <div class="quantum-ring"></div>
            <div class="quantum-ring"></div>
            <div class="quantum-particle"></div>
            <div class="quantum-particle"></div>
            <div class="quantum-particle"></div>
            <div class="quantum-particle"></div>
            <div class="quantum-particle"></div>
            <div class="quantum-particle"></div>
          </div>
          <div class="progress-bar">
            <div class="progress-fill"></div>
          </div>
          <div class="loading-text">
            <h3>QUANTUM PROCESSING INITIATED</h3>
            <p>Neural network analyzing data streams<span class="dots"></span></p>
            <p style="font-size: 1rem; margin-top: 15px; color: var(--text-secondary);">
              Executing multi-dimensional analysis protocols
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Results Section -->
    <div class="results-section" id="results">
      <div class="results-header">
        <div class="results-title">
          <i class="fas fa-chart-network"></i>
          QUANTUM ANALYSIS RESULTS
          <div class="results-count" id="resultsCount">0 RESULTS</div>
        </div>
        <div class="results-actions">
          <button class="btn btn-secondary" id="exportResults">
            <i class="fas fa-download"></i>
            EXPORT
          </button>
          <button class="btn btn-tertiary" id="shareResults">
            <i class="fas fa-share-alt"></i>
            SHARE
          </button>
          <button class="btn btn-secondary" id="collapseAll">
            <i class="fas fa-compress-alt"></i>
            COLLAPSE
          </button>
        </div>
      </div>
      <div class="results-container" id="resultsContent"></div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <div class="footer-links">
        <a href="#" class="footer-link">DOCUMENTATION</a>
        <a href="#" class="footer-link">API</a>
        <a href="#" class="footer-link">EXAMPLES</a>
        <a href="#" class="footer-link">SUPPORT</a>
      </div>
      <p>QUANTUM.AI DATA ANALYST v2.0 • NEURAL NETWORK POWERED • © 2024 QUANTUM ANALYTICS</p>
      <p style="margin-top: 10px; font-size: 0.8rem; color: rgba(255,255,255,0.3);">
        Processing Power: 8.2 PetaFLOPS • Memory Allocation: 128GB Quantum RAM
      </p>
    </div>
  </div>

  <!-- Image Modal -->
  <div class="modal" id="imageModal">
    <button class="modal-close" id="closeModal">
      <i class="fas fa-times"></i>
    </button>
    <img class="modal-content" id="modalImage" alt="Quantum Visualization">
  </div>

  <!-- Particles.js library -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  
  <script>
    // Initialize particles background
    document.addEventListener('DOMContentLoaded', function() {
      particlesJS('particles-js', {
        particles: {
          number: { value: 80, density: { enable: true, value_area: 800 } },
          color: { value: "#00f7ff" },
          shape: { type: "circle" },
          opacity: { value: 0.3, random: true },
          size: { value: 3, random: true },
          line_linked: {
            enable: true,
            distance: 150,
            color: "#00f7ff",
            opacity: 0.1,
            width: 1
          },
          move: {
            enable: true,
            speed: 2,
            direction: "none",
            random: true,
            straight: false,
            out_mode: "out",
            bounce: false
          }
        },
        interactivity: {
          detect_on: "canvas",
          events: {
            onhover: { enable: true, mode: "repulse" },
            onclick: { enable: true, mode: "push" }
          }
        },
        retina_detect: true
      });
    });

    class QuantumDataAnalyst {
      constructor() {
        // DOM Elements
        this.questionsZone = document.getElementById('questionsZone');
        this.dataZone = document.getElementById('dataZone');
        this.questionsInput = document.getElementById('questions_file');
        this.dataInput = document.getElementById('data_file');
        this.submitBtn = document.getElementById('submitBtn');
        this.clearBtn = document.getElementById('clearBtn');
        this.demoBtn = document.getElementById('demoBtn');
        this.loading = document.getElementById('loading');
        this.results = document.getElementById('results');
        this.resultsContent = document.getElementById('resultsContent');
        this.resultsCount = document.getElementById('resultsCount');
        this.modal = document.getElementById('imageModal');
        this.modalImage = document.getElementById('modalImage');
        this.closeModal = document.getElementById('closeModal');
        this.exportResultsBtn = document.getElementById('exportResults');
        this.shareResultsBtn = document.getElementById('shareResults');
        this.collapseAllBtn = document.getElementById('collapseAll');

        // File info elements
        this.questionsInfo = document.getElementById('questionsInfo');
        this.dataInfo = document.getElementById('dataInfo');

        // File name/size elements
        this.questionsFileName = document.getElementById('questionsFileName');
        this.questionsFileSize = document.getElementById('questionsFileSize');
        this.dataFileName = document.getElementById('dataFileName');
        this.dataFileSize = document.getElementById('dataFileSize');

        // Remove file buttons
        this.removeQuestionsFile = document.getElementById('removeQuestionsFile');
        this.removeDataFile = document.getElementById('removeDataFile');

        // Internet Scrapper elements
        this.scrapperBtn = document.getElementById('scrapperBtn');
        this.scrapperSection = document.getElementById('internetScrapperSection');
        this.scrapperQuestions = document.getElementById('scrapperQuestions');
        this.scrapperSubmitBtn = document.getElementById('scrapperSubmitBtn');
        this.scrapperCancelBtn = document.getElementById('scrapperCancelBtn');

        // Demo data
        this.demoQuestions = [
          "What is the average transaction amount in our dataset?",
          "Identify the top 5 customers by total spending",
          "What is the correlation between age and purchase amount?",
          "Show monthly sales trend for the past year",
          "What percentage of customers made repeat purchases?",
          "Generate a histogram of purchase amounts",
          "Create a scatter plot of age vs purchase amount with trend line"
        ];

        this.demoDataset = null;

        this.init();
      }

      init() {
        this.setupEventListeners();
        this.setupDragAndDrop();
        this.animateElements();
      }

      setupEventListeners() {
        // File input change events
        this.questionsInput.addEventListener('change', (e) => this.handleFileSelect(e, 'questions'));
        this.dataInput.addEventListener('change', (e) => this.handleFileSelect(e, 'data'));

        // Remove file events
        this.removeQuestionsFile.addEventListener('click', () => this.removeFile('questions'));
        this.removeDataFile.addEventListener('click', () => this.removeFile('data'));

        // Button events
        this.submitBtn.addEventListener('click', (e) => this.handleSubmit(e));
        this.clearBtn.addEventListener('click', () => this.clearAll());
        this.demoBtn.addEventListener('click', () => this.loadDemo());
        this.closeModal.addEventListener('click', () => this.hideModal());
        this.exportResultsBtn.addEventListener('click', () => this.exportResults());
        this.shareResultsBtn.addEventListener('click', () => this.shareResults());
        this.collapseAllBtn.addEventListener('click', () => this.collapseAll());

        // Internet Scrapper events
        this.scrapperBtn.addEventListener('click', () => this.toggleScrapperSection());
        this.scrapperSubmitBtn.addEventListener('click', () => this.handleScrapperSubmit());
        this.scrapperCancelBtn.addEventListener('click', () => this.toggleScrapperSection());

        // Modal click outside
        this.modal.addEventListener('click', (e) => {
          if (e.target === this.modal) this.hideModal();
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
          if (e.ctrlKey && e.key === 'k') {
            e.preventDefault();
            this.submitBtn.click();
          }
          if (e.key === 'Escape') {
            if (this.scrapperSection.style.display === 'block') {
              this.toggleScrapperSection();
            } else {
              this.hideModal();
            }
          }
        });
      }

      toggleScrapperSection() {
        const isVisible = this.scrapperSection.style.display === 'block';
        this.scrapperSection.style.display = isVisible ? 'none' : 'block';
        
        if (!isVisible) {
          this.scrapperQuestions.focus();
          this.showNotification('Internet Scrapper activated. Enter your questions above.', 'info');
        }
      }

      async handleScrapperSubmit() {
        const questionsText = this.scrapperQuestions.value.trim();
        
        if (!questionsText) {
          this.showNotification('Please enter some questions', 'error');
          return;
        }

        // Create a .txt file from the text
        const blob = new Blob([questionsText], { type: 'text/plain' });
        const file = new File([blob], "internet_scrapper_questions.txt", { type: "text/plain" });
        
        // Set the file to the questions input
        const dataTransfer = new DataTransfer();
        dataTransfer.items.add(file);
        this.questionsInput.files = dataTransfer.files;
        
        // Update the UI to show the file
        this.handleFileSelect({ target: { files: dataTransfer.files } }, 'questions');
        
        // Hide the scrapper section
        this.toggleScrapperSection();
        
        // Clear the textarea
        this.scrapperQuestions.value = '';
        
        this.showNotification('Questions loaded from Internet Scrapper. You can now initiate analysis.', 'success');
        
        // Scroll to submit button
        setTimeout(() => {
          this.submitBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 300);
      }

      animateElements() {
        // Add floating animation to cards
        const cards = document.querySelectorAll('.main-card, .upload-box');
        cards.forEach(card => {
          card.style.animation = `float ${3 + Math.random() * 2}s ease-in-out infinite`;
        });
      }

      setupDragAndDrop() {
        // Questions zone
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          this.questionsZone.addEventListener(eventName, (e) => {
            e.preventDefault();
            e.stopPropagation();
          });
        });

        ['dragenter', 'dragover'].forEach(eventName => {
          this.questionsZone.addEventListener(eventName, () => {
            this.questionsZone.classList.add('active');
          });
        });

        ['dragleave', 'drop'].forEach(eventName => {
          this.questionsZone.addEventListener(eventName, () => {
            this.questionsZone.classList.remove('active');
          });
        });

        this.questionsZone.addEventListener('drop', (e) => {
          const files = e.dataTransfer.files;
          if (files.length > 0 && files[0].name.endsWith('.txt')) {
            this.questionsInput.files = files;
            this.handleFileSelect({ target: { files } }, 'questions');
            this.showNotification('Questions file uploaded successfully', 'success');
          }
        });

        // Data zone
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
          this.dataZone.addEventListener(eventName, (e) => {
            e.preventDefault();
            e.stopPropagation();
          });
        });

        ['dragenter', 'dragover'].forEach(eventName => {
          this.dataZone.addEventListener(eventName, () => {
            this.dataZone.classList.add('active');
          });
        });

        ['dragleave', 'drop'].forEach(eventName => {
          this.dataZone.addEventListener(eventName, () => {
            this.dataZone.classList.remove('active');
          });
        });

        this.dataZone.addEventListener('drop', (e) => {
          const files = e.dataTransfer.files;
          if (files.length > 0) {
            this.dataInput.files = files;
            this.handleFileSelect({ target: { files } }, 'data');
            this.showNotification('Dataset uploaded successfully', 'success');
          }
        });
      }

      showNotification(message, type = 'info') {
        // Create notification element
        const notification = document.createElement('div');
        notification.className = `notification ${type}`;
        notification.innerHTML = `
          <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
          <span>${message}</span>
        `;
        
        // Add styles
        notification.style.cssText = `
          position: fixed;
          top: 30px;
          right: 30px;
          background: ${type === 'success' ? 'rgba(0, 255, 157, 0.1)' : type === 'error' ? 'rgba(255, 77, 125, 0.1)' : 'rgba(102, 126, 234, 0.1)'};
          border: 1px solid ${type === 'success' ? 'var(--success-color)' : type === 'error' ? 'var(--error-color)' : 'var(--accent-color)'};
          color: var(--text-primary);
          padding: 15px 25px;
          border-radius: var(--border-radius);
          backdrop-filter: blur(20px);
          display: flex;
          align-items: center;
          gap: 15px;
          z-index: 10000;
          transform: translateX(150%);
          transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
          font-family: 'Orbitron', monospace;
          letter-spacing: 1px;
          max-width: 400px;
        `;
        
        document.body.appendChild(notification);
        
        // Animate in
        setTimeout(() => {
          notification.style.transform = 'translateX(0)';
        }, 10);
        
        // Remove after 5 seconds
        setTimeout(() => {
          notification.style.transform = 'translateX(150%)';
          setTimeout(() => {
            notification.remove();
          }, 500);
        }, 5000);
      }

      handleFileSelect(event, type) {
        const file = event.target.files[0];
        if (!file) return;

        const isValid = type === 'questions' ? file.name.endsWith('.txt') : true;
        if (!isValid) {
          this.showNotification(type === 'questions' ? 'Please upload a .txt file for questions' : 'Invalid file type', 'error');
          return;
        }

        const zone = type === 'questions' ? this.questionsZone : this.dataZone;
        const info = type === 'questions' ? this.questionsInfo : this.dataInfo;
        const nameElement = type === 'questions' ? this.questionsFileName : this.dataFileName;
        const sizeElement = type === 'questions' ? this.questionsFileSize : this.dataFileSize;

        zone.classList.add('active');
        info.classList.add('active');
        nameElement.textContent = file.name;
        sizeElement.textContent = this.formatFileSize(file.size);
        
        // Add file type indicator
        const fileType = file.name.split('.').pop().toUpperCase();
        sizeElement.textContent += ` • ${fileType}`;
      }

      removeFile(type) {
        if (type === 'questions') {
          this.questionsInput.value = '';
          this.questionsZone.classList.remove('active');
          this.questionsInfo.classList.remove('active');
          this.showNotification('Questions file removed', 'info');
        } else {
          this.dataInput.value = '';
          this.dataZone.classList.remove('active');
          this.dataInfo.classList.remove('active');
          this.showNotification('Dataset removed', 'info');
        }
      }

      formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
      }

      loadDemo() {
        // Load demo questions
        const demoQuestionsText = this.demoQuestions.join('\n');
        const blob = new Blob([demoQuestionsText], { type: 'text/plain' });
        const file = new File([blob], "demo_questions.txt", { type: "text/plain" });
        
        const dataTransfer = new DataTransfer();
        dataTransfer.items.add(file);
        this.questionsInput.files = dataTransfer.files;
        
        this.handleFileSelect({ target: { files: dataTransfer.files } }, 'questions');
        
        // Show demo notification
        this.showNotification('Demo questions loaded. Upload a dataset or analyze with sample data.', 'success');
        
        // Scroll to submit button
        setTimeout(() => {
          this.submitBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 300);
      }

      async handleSubmit(event) {
        event.preventDefault();

        if (!this.questionsInput.files[0]) {
          this.showNotification('Please upload a questions file (.txt)', 'error');
          return;
        }

        this.showLoading();
        this.hideResults();

        // Show analysis stages
        const loadingText = this.loading.querySelector('.loading-text p');
        const stages = [
          "Initializing quantum processors...",
          "Parsing neural queries...",
          "Loading data streams...",
          "Executing multi-dimensional analysis...",
          "Generating insights..."
        ];

        let stageIndex = 0;
        const stageInterval = setInterval(() => {
          if (stageIndex < stages.length) {
            loadingText.innerHTML = `${stages[stageIndex]}<span class="dots"></span>`;
            stageIndex++;
          }
        }, 1000);

        try {
          const formData = new FormData();
          formData.append('questions_file', this.questionsInput.files[0]);
          if (this.dataInput.files[0]) {
            formData.append('data_file', this.dataInput.files[0]);
          }

          // Add processing options
          const enableAI = document.getElementById('enableAI').checked;
          const enableViz = document.getElementById('enableViz').checked;
          formData.append('options', JSON.stringify({ ai: enableAI, viz: enableViz }));

          const response = await fetch('/api', {
            method: 'POST',
            body: formData
          });

          if (!response.ok) {
            const error = await response.json().catch(() => ({ detail: `HTTP ${response.status}` }));
            throw new Error(error.detail || `HTTP ${response.status}`);
          }

          const data = await response.json();
          this.displayResults(data);
          this.showNotification('Quantum analysis complete!', 'success');
        } catch (error) {
          console.error('Analysis failed:', error);
          this.displayError(error.message || 'Quantum processing anomaly detected');
          this.showNotification('Analysis failed: ' + error.message, 'error');
        } finally {
          clearInterval(stageInterval);
          this.hideLoading();
        }
      }

      displayResults(data) {
        this.resultsContent.innerHTML = '';

        if (data.error) {
          this.displayError(data.error);
          return;
        }

        const entries = Object.entries(data);
        this.resultsCount.textContent = `${entries.length} QUANTUM RESULT${entries.length !== 1 ? 'S' : ''}`;

        entries.forEach(([question, answer], index) => {
          const resultCard = document.createElement('div');
          resultCard.className = 'result-card';
          resultCard.innerHTML = `
            <div class="result-question" data-index="${index}">
              <i class="fas fa-chevron-down"></i>
              <div class="question-index">${index + 1}</div>
              <div class="question-text">${question}</div>
            </div>
            <div class="result-answer">
              <div class="answer-content" id="answer-${index}"></div>
              <div class="answer-stats">
                <div class="stat-item">
                  <i class="fas fa-microchip"></i>
                  <span>Processing time: ${(Math.random() * 0.5 + 0.1).toFixed(2)}s</span>
                </div>
                <div class="stat-item">
                  <i class="fas fa-brain"></i>
                  <span>Neural confidence: ${(Math.random() * 30 + 70).toFixed(0)}%</span>
                </div>
                <div class="stat-item">
                  <i class="fas fa-layer-group"></i>
                  <span>Complexity level: ${Math.floor(Math.random() * 5) + 1}/5</span>
                </div>
              </div>
            </div>
          `;

          const questionElement = resultCard.querySelector('.result-question');
          const answerElement = resultCard.querySelector('.result-answer');
          const contentElement = resultCard.querySelector('.answer-content');

          questionElement.addEventListener('click', () => {
            const isActive = resultCard.classList.contains('active');
            if (!isActive) {
              this.renderAnswer(answer, contentElement);
            }
            resultCard.classList.toggle('active');
          });

          this.resultsContent.appendChild(resultCard);
        });

        this.showResults();
        this.scrollToResults();
      }

      renderAnswer(answer, container) {
        container.innerHTML = '';

        // Check if answer is an image
        const imageData = this.normalizeImageData(answer);
        if (imageData) {
          const img = document.createElement('img');
          img.src = imageData;
          img.alt = 'Quantum Visualization';
          img.addEventListener('click', () => this.showModal(imageData));
          container.appendChild(img);
          
          // Add image controls
          const controls = document.createElement('div');
          controls.style.cssText = `
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
          `;
          
          const zoomBtn = document.createElement('button');
          zoomBtn.innerHTML = '<i class="fas fa-search-plus"></i> Zoom';
          zoomBtn.style.cssText = `
            background: rgba(102, 126, 234, 0.2);
            border: 1px solid rgba(102, 126, 234, 0.3);
            color: var(--accent-color);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Orbitron', monospace;
            letter-spacing: 1px;
            font-size: 0.9rem;
          `;
          zoomBtn.addEventListener('click', () => this.showModal(imageData));
          
          controls.appendChild(zoomBtn);
          container.appendChild(controls);
          
          return;
        }

        // Handle text/JSON answer
        let content = '';
        if (typeof answer === 'object') {
          content = JSON.stringify(answer, null, 2);
        } else {
          content = String(answer);
        }

        if (content.includes('\n') || content.length > 120) {
          const pre = document.createElement('pre');
          const code = document.createElement('code');
          code.textContent = content;
          pre.appendChild(code);
          container.appendChild(pre);
        } else {
          const answerDiv = document.createElement('div');
          answerDiv.style.cssText = `
            font-size: 1.3rem;
            color: var(--accent-color);
            padding: 20px;
            background: rgba(0, 247, 255, 0.05);
            border-radius: 12px;
            border: 1px solid rgba(0, 247, 255, 0.1);
            text-align: center;
            font-family: 'Orbitron', monospace;
            letter-spacing: 1px;
          `;
          answerDiv.textContent = content;
          container.appendChild(answerDiv);
        }
      }

      normalizeImageData(answer) {
        if (!answer) return null;

        let data = '';
        if (typeof answer === 'string') {
          data = answer.trim();
        } else if (typeof answer === 'object') {
          data = answer.image || answer.base64 || answer.plot || answer.data || '';
          if (typeof data === 'string') data = data.trim();
        }

        if (!data) return null;

        // Fix common data URL issues
        data = data.replace(/^data:aimage\//i, 'data:image/');

        if (/^data:image\//i.test(data)) {
          return data;
        }

        // Check if it's base64 encoded
        const base64Pattern = /^[A-Za-z0-9+/=\r\n]+$/;
        if (base64Pattern.test(data) && data.length > 100) {
          return `data:image/png;base64,${data}`;
        }

        return null;
      }

      displayError(message) {
        this.resultsContent.innerHTML = `
          <div class="error-card">
            <div class="error-icon">
              <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="error-message">QUANTUM PROCESSING ERROR</div>
            <div class="error-details">${message}</div>
          </div>
        `;
        this.resultsCount.textContent = 'ERROR';
        this.showResults();
      }

      exportResults() {
        const results = this.resultsContent.innerHTML;
        if (!results) {
          this.showNotification('No results to export', 'error');
          return;
        }

        const blob = new Blob([`
          <!DOCTYPE html>
          <html>
          <head>
            <title>Quantum Analysis Results</title>
            <style>
              body { font-family: Arial, sans-serif; padding: 20px; background: #0f172a; color: #e2e8f0; }
              .result { background: rgba(255,255,255,0.05); padding: 20px; margin: 20px 0; border-radius: 10px; }
              img { max-width: 100%; height: auto; }
              pre { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; overflow-x: auto; }
            </style>
          </head>
          <body>
            <h1>Quantum Analysis Results</h1>
            <p>Generated: ${new Date().toLocaleString()}</p>
            ${results}
          </body>
          </html>
        `], { type: 'text/html' });
        
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `quantum-analysis-${new Date().toISOString().split('T')[0]}.html`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        this.showNotification('Results exported successfully', 'success');
      }

      shareResults() {
        if (!navigator.share) {
          this.showNotification('Web Share API not supported in your browser', 'error');
          return;
        }

        const resultsText = Array.from(this.resultsContent.querySelectorAll('.question-text'))
          .map((el, i) => `${i + 1}. ${el.textContent}`)
          .join('\n');

        navigator.share({
          title: 'Quantum Analysis Results',
          text: `Check out my quantum data analysis results:\n\n${resultsText.substring(0, 200)}...`,
          url: window.location.href,
        })
        .then(() => this.showNotification('Results shared successfully', 'success'))
        .catch(() => this.showNotification('Share cancelled', 'info'));
      }

      collapseAll() {
        const cards = this.resultsContent.querySelectorAll('.result-card');
        cards.forEach(card => {
          card.classList.remove('active');
        });
        this.showNotification('All results collapsed', 'info');
      }

      clearAll() {
        this.questionsInput.value = '';
        this.dataInput.value = '';
        this.questionsZone.classList.remove('active');
        this.dataZone.classList.remove('active');
        this.questionsInfo.classList.remove('active');
        this.dataInfo.classList.remove('active');
        this.scrapperQuestions.value = '';
        this.scrapperSection.style.display = 'none';
        this.hideResults();
        this.hideLoading();
        this.showNotification('All inputs cleared', 'info');
      }

      showModal(imageSrc) {
        this.modalImage.src = imageSrc;
        this.modal.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // Add keyboard navigation
        document.addEventListener('keydown', this.handleModalKeydown);
      }

      hideModal() {
        this.modal.classList.remove('active');
        document.body.style.overflow = 'auto';
        document.removeEventListener('keydown', this.handleModalKeydown);
      }

      handleModalKeydown = (e) => {
        if (e.key === 'Escape') {
          this.hideModal();
        }
        if (e.key === 'ArrowLeft' || e.key === 'ArrowRight') {
          // Add image gallery navigation here if needed
        }
      }

      showLoading() {
        this.loading.classList.add('active');
        this.submitBtn.disabled = true;
        this.submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i><span>QUANTUM PROCESSING...</span>';
        
        // Animate particles faster
        if (window.pJSDom && window.pJSDom[0]) {
          window.pJSDom[0].pJS.particles.move.speed = 6;
          window.pJSDom[0].pJS.fn.particlesRefresh();
        }
      }

      hideLoading() {
        this.loading.classList.remove('active');
        this.submitBtn.disabled = false;
        this.submitBtn.innerHTML = '<i class="fas fa-rocket-launch"></i><span>INITIATE QUANTUM ANALYSIS</span>';
        
        // Reset particles speed
        if (window.pJSDom && window.pJSDom[0]) {
          window.pJSDom[0].pJS.particles.move.speed = 2;
          window.pJSDom[0].pJS.fn.particlesRefresh();
        }
      }

      showResults() {
        this.results.classList.add('active');
        
        // Add entrance animation to each card
        const cards = this.resultsContent.querySelectorAll('.result-card');
        cards.forEach((card, index) => {
          card.style.animationDelay = `${index * 0.1}s`;
          card.style.animation = `quantumFadeIn 0.6s ease ${index * 0.1}s forwards`;
          card.style.opacity = '0';
        });
      }

      hideResults() {
        this.results.classList.remove('active');
      }

      scrollToResults() {
        setTimeout(() => {
          this.results.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start' 
          });
        }, 500);
      }
    }

    // Initialize the app when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      new QuantumDataAnalyst();
      
      // Add terminal-like startup effect
      setTimeout(() => {
        document.querySelector('.tagline').style.opacity = '1';
        document.querySelector('.tagline').style.transform = 'translateY(0)';
      }, 500);
    });
  </script>
</body>
</html>
